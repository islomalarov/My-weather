(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function j(t){const e=document.querySelector(".weather__content");e.style.display="none";const n=document.querySelector(".error");n.style.display="flex";const o=document.querySelector("#errorName");o.textContent=t}function G(){const t=document.querySelector(".weather__content");t.style.display="block";const e=document.querySelector(".error");e.style.display="none"}const f="69151ddc14e90d97cd654a5d8d86eab1";async function w(t){try{return await(await fetch(t)).json()}catch(e){return e}}async function W(t){const[e]=await w(`https://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=1&appid=${f}`);return e}async function k(){return new Promise(t=>{navigator.geolocation.getCurrentPosition(e=>{t(e.coords)})})}async function A(t){try{if(t){const{lat:e,lon:n}=await W(t);return await w(`https://api.openweathermap.org/data/3.0/onecall?lat=${e}&lon=${n}&exclude=minutely,alerts&units=metric&appid=${f}`)}else{const{latitude:e,longitude:n}=await k();return await w(`https://api.openweathermap.org/data/3.0/onecall?lat=${e}&lon=${n}&exclude=minutely,alerts&units=metric&appid=${f}`)}}catch{j(t)}}async function J(t){if(t){const{lat:e,lon:n}=await W(t);return await w(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${n}&units=metric&appid=${f}`)}else{const{latitude:e,longitude:n}=await k();return await w(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${n}&units=metric&appid=${f}`)}}function Q(t){t=new Date(t*1e3);let e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear();return`${e}.${n<=9?"0"+n:n}.${o}`}function I(t,e){let n=new Date(t*1e3).getTimezoneOffset();return t=t-(-n*60-e),P(t,"numeric")}function V(t,e){let n=e-t,o=Math.floor(n/3600),r=Math.floor((n-3600*o)/60);return`${o<=9?"0"+o:o}:${r<=9?"0"+r:r} hr`}function O(t,e){let n,o=new Date().getHours(),r=new Date().getDate(),a=new Date(e*1e3).getDate();return r===a&&(o>=22||o<=6)?n="TONIGHT":r===a?n="TODAY":n=new Intl.DateTimeFormat("en-US",{weekday:t}).format(new Date(e*1e3)).toUpperCase(),n}function X(t,e){return new Intl.DateTimeFormat("en-US",{month:t,day:"numeric"}).format(new Date(e*1e3))}function P(t,e){return e?new Intl.DateTimeFormat("en-AU",{hour:"numeric",minute:e}).format(new Date(t*1e3)):new Intl.DateTimeFormat("en-AU",{hour:"numeric"}).format(new Date(t*1e3))}async function C(t,e,n=0){const o=await ee(e),[{dt:r}]=o[n],a=document.querySelector(t);a.lastElementChild.tagName!=="H3"&&a.lastElementChild.remove();const c=document.createElement("table"),s=document.createElement("tr"),u=document.createElement("tr"),l=document.createElement("tr"),i=document.createElement("tr"),d=document.createElement("tr"),m=document.createElement("tr"),h=document.createElement("th"),p=document.createElement("th"),T=document.createElement("th"),g=document.createElement("th"),E=document.createElement("th"),b=document.createElement("th");h.textContent=O("long",r),T.textContent="Forecast",g.textContent="Temp (°C)",E.textContent="RealFeel",b.textContent="Wind (km/h)",s.append(h),u.append(p),l.append(T),i.append(g),d.append(E),m.append(b);for(let _ of o[n]){const{dt:$,main:{temp:B,feels_like:Y},weather:[{main:K,icon:N}],wind:{speed:Z}}=_,x=document.createElement("td"),S=document.createElement("td"),q=document.createElement("img"),F=document.createElement("td"),v=document.createElement("td"),L=document.createElement("td"),M=document.createElement("td");x.textContent=P($),q.src=`https://openweathermap.org/img/wn/${N}@2x.png`,S.append(q),F.textContent=K,v.textContent=`${Math.round(B)}°`,L.textContent=`${Math.round(Y)}°`,M.textContent=`${Math.round(Z)} ESE`,s.append(x),u.append(S),l.append(F),d.append(v),i.append(L),m.append(M)}c.append(s,u,l,i,d,m),a.append(c)}async function ee(t){const{list:e}=await J(t),n=[];for(let o=0;o<e.length;o+=8)n.push(e.slice(o,o+8));return n}const te=(t,e,n,o)=>{const r=document.querySelector(t),a=document.querySelectorAll(e),c=document.querySelectorAll(n);y(a,o),y(c,o),r.addEventListener("click",s=>{a.forEach((u,l)=>{s.target===u&&(D(a,o),D(c,o),y(a,o,l),y(c,o,l))})})},R=(t,e,n,o,r)=>{const a=document.querySelector(t),c=document.querySelectorAll(e);D(c,n),y(c,n),C(o,r),a.addEventListener("click",s=>{c.forEach((u,l)=>{s.target.closest(".weather__5day-forecast-days")===u&&(D(c,n),y(c,n,l),C(o,r,l))})})},D=(t,e)=>{t.forEach(n=>{n.classList.remove(e)})},y=(t,e,n=0)=>{t[n].classList.add(e)};async function U(t){const{current:e,timezone:n,timezone_offset:o}=await A(t),{dt:r,feels_like:a,sunrise:c,sunset:s,temp:u,weather:l}=e,[{main:i,icon:d}]=l,m=document.querySelector("#timeZone"),h=document.querySelector("#currentDate"),p=document.querySelector("#sunrise"),T=document.querySelector("#sunset"),g=document.querySelector("#duration"),E=document.querySelector("#currentWeatherDescription"),b=document.querySelector("#currentTemp"),_=document.querySelector("#feelsLike"),$=document.querySelector("#currentWeatherIcon");m.textContent=n,h.textContent=Q(r),p.textContent=I(c,o),T.textContent=I(s,o),g.textContent=V(c,s),$.src=`https://openweathermap.org/img/wn/${d}@2x.png`,E.textContent=i,b.textContent=`${Math.round(u)}°C`,_.textContent=`Real Feel ${Math.round(a)}°`}async function z(t){const{daily:e}=await A(t),n=document.querySelector("#weather5day");n.innerHTML="",e.slice(0,5).forEach(o=>{const{dt:r,weather:[{main:a,icon:c}],temp:{day:s,night:u}}=o,l=document.createElement("div"),i=document.createElement("h3"),d=document.createElement("span"),m=document.createElement("img"),h=document.createElement("span"),p=document.createElement("span");l.className="weather__5day-forecast-days",i.className="weather__5day-day title",d.className="weather__5day-date",m.className="weather__5day-icon",h.className="weather__5day-temp",p.className="weather__5day-description",i.textContent=O("short",r),d.textContent=X("short",r),m.src=`https://openweathermap.org/img/wn/${c}@2x.png`,h.textContent=`${Math.round(s)}°/ ${Math.round(u)}°`,p.textContent=a,l.append(i,d,m,h,p),n.append(l)})}async function ne(){te("#tabsContent",".tabs__content-btn",".weather__tabs","active"),await U(),await C("#todayHourly"),await z(),R("#weather5day",".weather__5day-forecast-days","active","#forecastHourly")}ne();const H=document.forms.searchForm;H.addEventListener("submit",async t=>{t.preventDefault();const e=H.cityInput.value;e?(G(),await U(e),await C("#todayHourly",e),await z(e),R("#weather5day",".weather__5day-forecast-days","active","#forecastHourly",e)):alert("Enter the city name")});
